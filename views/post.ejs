<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VCC Confiesate</title>
    <link rel="stylesheet" href="/public/css/style.css"> 
    <link rel="stylesheet" href="/public/css/post.css">
    <link rel="icon" href="https://vcc.softromy.com/favicon.png">
    <link rel="stylesheet" href="../public/css/media.queryPost.css">
    <script src="https://kit.fontawesome.com/a8192839c1.js" crossorigin="anonymous"></script>
</head>
<body>
    <header class="header">
        <span class="span-max">CONFIESATE</span>
        <button class="button">Inicio</button>
    </header>
    <section>
        <!-- T√≠tulo del post -->
        <div class="titles">
            <h1 class="title-post" style="margin: 3px 20px;"><%= post.titulo %></h1>
            <p class="descrip-post" style="margin: 2px 20px;"><%= post.descripcion %></p>
        </div>
        <!-- Contenedor de im√°genes -->
        <% const folderPath = `/uploads/${post.carpeta}`; %>
        <% const mediaFiles = post.imagenes ? JSON.parse(post.imagenes) : []; %>
        <main class="main">
            <div class="conten-imgs carousel">
                <button id="prev"> < </button>
                <% mediaFiles.forEach((media, index) => { %>
                    <div class="img-container">
                        <img src="<%=`${folderPath}/${media}`%>" class="img-post" id="carousel-image-<%=index%>" alt="Media de Post">
                    </div>
                <% }); %>
                <button id="next"> > </button>
            </div>
            <div>
                <ul class="ul-reactions">
                    <li><button data-post-id="<%= post.id %>" class="button-reaction button-reac">‚ù§Ô∏è 0</button></li>
                    <li><button data-post-id="<%= post.id %>" class="button-reaction button-reac">ü§£ 0</button></li>
                    <li><button data-post-id="<%= post.id %>" class="button-reaction button-reac">üò• 0</button></li>
                    <li><button data-post-id="<%= post.id %>" class="button-reaction button-reac">üòà 0</button></li>
                    <li><button data-post-id="<%= post.id %>" class="button-reaction button-reac">üò™ 0</button></li>
                </ul>
            </div>
        </main>
    </div>
</main>

    <!-- Secci√≥n de comentarios -->
        <div class="comentarios" style="margin: 20px;">
            <!-- T√≠tulo de comentarios -->
            <h2><%= comentarios.length %> comentarios</h2>
            <div class="conten-input">
                <!-- Imagen del usuario que comenta -->
                <img src="../prv/img/user.png" style="width: 30px;" alt="Imagen de usuario">
                <!-- Formulario para agregar comentario -->
                <form action="/confesion/<%= post.id %>/comentario" method="post" class="input-form">
                    <input type="text" name="contenido" class="input" placeholder="Agregar un comentario..." required>
                    <button type="submit" id="btn-comment">Comentar</button>
                </form>
            </div>

            <!-- L√≠nea divisora -->
            <div class="as"></div>

            <!-- Contenedor de comentarios -->
            <div class="comments-conten">
                <% comentarios.forEach(comment => { %>
                    <div class="comment-conten">
                        <div class="user-conten">
                            <img src="../prv/img/user2.png" width="20px" alt="Imagen de usuario">
                        </div>
                        <div class="comment">
                            <p class="comment-p"><%= comment.text %></p>
                        </div>
                    </div>
                    <div class="es"></div>
                <% }); %>
            </div>
        </div>
    </section>
    <footer class="footer">
        <p>&copy; 2023 Confiesate Ccalamaquino</p>
    </footer>
    <script src="../public/js/post.js"></script>
</body>
</html>
